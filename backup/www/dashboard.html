<!DOCTYPE html>
<html>
<head>
    <title>ZeroAI System Dashboard</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background: #1a1a1a; color: #fff; }
        .stats { display: flex; gap: 20px; margin-bottom: 20px; }
        .stat-card { background: #2a2a2a; padding: 20px; border-radius: 8px; flex: 1; }
        .stat-value { font-size: 2em; font-weight: bold; color: #00ff88; }
        .stat-label { color: #ccc; margin-top: 5px; }
        .chart { width: 100%; height: 200px; background: #2a2a2a; border-radius: 8px; margin: 10px 0; }
    </style>
</head>
<body>
    <h1>ðŸ¤– ZeroAI System Dashboard</h1>
    
    <div class="stats">
        <div class="stat-card">
            <div class="stat-value" id="cpu">0%</div>
            <div class="stat-label">CPU Usage</div>
        </div>
        <div class="stat-card">
            <div class="stat-value" id="memory">0%</div>
            <div class="stat-label">Memory Usage</div>
        </div>
        <div class="stat-card">
            <div class="stat-value" id="disk">0</div>
            <div class="stat-label">Disk I/O</div>
        </div>
    </div>

    <canvas id="cpuChart" class="chart"></canvas>
    <canvas id="memChart" class="chart"></canvas>

    <script>
        const cpuData = [];
        const memData = [];
        let lastDiskReads = 0;
        let lastDiskWrites = 0;

        function updateStats() {
            fetch('/api/system_stats.php')
                .then(r => r.json())
                .then(data => {
                    document.getElementById('cpu').textContent = data.cpu + '%';
                    document.getElementById('memory').textContent = data.memory + '%';
                    
                    const diskIO = (data.disk_reads - lastDiskReads) + (data.disk_writes - lastDiskWrites);
                    document.getElementById('disk').textContent = diskIO;
                    lastDiskReads = data.disk_reads;
                    lastDiskWrites = data.disk_writes;

                    cpuData.push(data.cpu);
                    memData.push(data.memory);
                    if (cpuData.length > 60) cpuData.shift();
                    if (memData.length > 60) memData.shift();

                    drawChart('cpuChart', cpuData, '#ff6b6b');
                    drawChart('memChart', memData, '#4ecdc4');
                });
        }

        function drawChart(canvasId, data, color) {
            const canvas = document.getElementById(canvasId);
            const ctx = canvas.getContext('2d');
            canvas.width = canvas.offsetWidth;
            canvas.height = canvas.offsetHeight;

            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.strokeStyle = color;
            ctx.lineWidth = 2;
            ctx.beginPath();

            const step = canvas.width / (data.length - 1);
            data.forEach((value, i) => {
                const x = i * step;
                const y = canvas.height - (value / 100 * canvas.height);
                if (i === 0) ctx.moveTo(x, y);
                else ctx.lineTo(x, y);
            });
            ctx.stroke();
        }

        setInterval(updateStats, 1000);
        updateStats();
    </script>
</body>
</html>